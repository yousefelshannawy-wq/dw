# نظام البوت التعليمي المطور - الإصدار المحدث

## نظرة عامة
نظام بوت تعليمي متقدم مبني بـ Flask يوفر إجابات ذكية للطلاب مع ميزات إدارية متقدمة.

## الميزات الجديدة المضافة ✨

### 1. رفع الكتب من خانة المطور
- **رفع ملفات PDF و Word**: يمكن للمطور رفع كتب بصيغة PDF أو Word
- **استخراج النص التلقائي**: النظام يستخرج النص من الملفات تلقائياً
- **دعم أنواع الملفات**: PDF (.pdf), Word (.doc, .docx)
- **معاينة الملفات**: عرض معلومات الملف والمحتوى المستخرج

### 2. ربط الملف بأقسام متعددة
- **تحديد أقسام متعددة**: يمكن ربط الملف الواحد بأكثر من قسم
- **مرونة في التوزيع**: نفس الكتاب يمكن أن يكون متاحاً لأقسام مختلفة
- **إدارة الصلاحيات**: تحكم دقيق في من يمكنه الوصول للملف

### 3. ربط الأقسام بالفرق (الدرجات)
- **تنظيم هرمي**: كل قسم مربوط بفرقة دراسية معينة
- **تصنيف المحتوى**: ترتيب المواد حسب السنة الدراسية
- **سهولة التنقل**: البحث والفلترة حسب الفرقة والقسم

### 4. تسجيل الشات الكامل
- **حفظ الأسئلة والأجوبة**: تسجيل كل تفاعل بين المستخدم والبوت
- **ترقيم المحادثات**: كل محادثة لها رقم تسلسلي
- **تصنيف الرسائل**: تمييز بين أسئلة المستخدم وردود البوت
- **طوابع زمنية**: تسجيل وقت كل رسالة بدقة

### 5. تسجيل منفصل لكل مستخدم
- **معرف جلسة فريد**: كل مستخدم له معرف منفصل
- **تتبع النشاط**: تسجيل آخر نشاط للمستخدم
- **معلومات الجلسة**: حفظ عنوان IP ونوع المتصفح
- **إحصائيات المستخدم**: عدد المحادثات والتفاعلات

## الميزات الموجودة سابقاً 📚

### إدارة المحتوى
- إضافة وتعديل وحذف الفرق الدراسية
- إدارة الفصول الدراسية
- تنظيم الأقسام والمواد

### البوت الذكي
- إجابات تفاعلية باستخدام Gemini AI
- فهم السياق والمحتوى
- إجابات مخصصة حسب الفرقة والقسم

### الأمان والحماية
- حماية من هجمات Brute Force
- تشفير كلمات المرور
- جلسات آمنة

## التحديثات التقنية 🔧

### قاعدة البيانات
تم إضافة الجداول التالية:
- `file_departments`: ربط الملفات بأقسام متعددة
- `developer_files`: تخزين ملفات المطور
- `users`: تسجيل المستخدمين والجلسات
- حقول جديدة في `departments` و `conversations`

### المكتبات الجديدة
```
PyPDF2==3.0.1          # قراءة ملفات PDF
python-docx==0.8.11     # قراءة ملفات Word
pdfplumber==0.9.0       # استخراج النص من PDF
python-magic==0.4.27    # تحديد نوع الملف
textract==1.6.3         # استخراج النص المتقدم
```

### Routes الجديدة
- `/admin/upload-file`: رفع وإدارة الملفات
- `/admin/manage-departments`: إدارة الأقسام والفرق
- `/admin/chat-logs`: عرض سجلات الشات
- `/admin/user-chat/<user_id>`: عرض محادثات مستخدم محدد
- `/admin/files`: عرض الملفات المرفوعة

## التثبيت والإعداد 🚀

### متطلبات النظام
```bash
Python 3.8+
Flask 2.0+
SQLite 3
```

### خطوات التثبيت
```bash
# تثبيت المتطلبات
pip install -r requirements.txt

# تشغيل التطبيق
python app.py
```

### إعداد قاعدة البيانات
قاعدة البيانات ستُنشأ تلقائياً عند التشغيل الأول مع الجداول الجديدة.

## الاستخدام 📖

### للمطورين
1. الدخول إلى لوحة التحكم الإدارية
2. اختيار "إدارة الملفات"
3. رفع ملف PDF أو Word
4. تحديد الأقسام المناسبة
5. النظام سيستخرج النص تلقائياً

### لإدارة الأقسام
1. الدخول إلى "إدارة الأقسام"
2. ربط كل قسم بالفرقة المناسبة
3. تحديد الفصل الدراسي

### لمراقبة الشات
1. الدخول إلى "سجلات الشات"
2. عرض قائمة المستخدمين
3. النقر على مستخدم لعرض محادثاته

## الأمان 🔒

### الحماية المضافة
- فلترة أنواع الملفات المسموحة
- تنظيف أسماء الملفات
- حماية من رفع ملفات ضارة
- تشفير محتوى قاعدة البيانات

### الصلاحيات
- فصل صلاحيات المطور والمستخدم
- تحكم في الوصول للملفات
- مراقبة النشاط

## الإحصائيات 📊

النظام يوفر إحصائيات شاملة عن:
- عدد المستخدمين النشطين
- عدد المحادثات اليومية
- الملفات الأكثر استخداماً
- الأقسام الأكثر نشاطاً

## الدعم الفني 🛠️

للمساعدة أو الإبلاغ عن مشاكل:
- تحقق من ملفات السجل (logs)
- راجع إعدادات قاعدة البيانات
- تأكد من صلاحيات الملفات

## رخصة الاستخدام 📄

هذا المشروع مفتوح المصدر ويمكن استخدامه وتطويره بحرية.

---
**تم تطوير هذا النظام لتحسين تجربة التعلم الإلكتروني ومساعدة الطلاب في الحصول على إجابات دقيقة ومفيدة.**
